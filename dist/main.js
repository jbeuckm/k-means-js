!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports["kmeans-js"]=n():e["kmeans-js"]=n()}(global,(function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=t(2))&&r.__esModule?r:{default:r};var a=function(e,n,t){if(e.length!=n.length)throw"points and assignments arrays must be of same dimension";for(var r=0,o=t.length;r<o;r++){for(var a=[],i=0,f=n.length;i<f;i++)n[i]==r&&a.push(e[i]);a.length>0&&(t[r]=u(a))}return t},u=function(e){for(var n=e[0].slice(0),t=e.length,r=1;r<t;r++)for(var o=e[r],a=0,u=o.length;a<u;a++)n[a]+=o[a];for(var i=0,f=n.length;i<f;i++)n[i]/=t;return n},i=function(e,n){if(e.length!=n.length)throw"old and new assignment arrays must be of same dimension";for(var t=0,r=0,o=e.length;r<o;r++)e[r]!=n[r]&&t++;return t},f=function(e,n){for(var t=[],r=0,o=e.length;r<o;r++)t.push(s(e[r],n));return t},s=function(e,n){for(var t=[],r=0,o=n.length;r<o;r++)t.push(c(e,n[r]));return l(t)},l=function(e){for(var n=e[0],t=0,r=1,o=e.length;r<o;r++)e[r]<n&&(t=r,n=e[r]);return t},c=function(e,n){return Math.sqrt(d(e,n))},d=function(e,n){if(e.length!=n.length)throw"point1 and point2 must be of same dimension";for(var t=e.length,r=0,o=0;o<t;o++)r+=(e[o]-n[o])*(e[o]-n[o]);return r};n.default={averagePosition:u,cluster:function(e,n,t){for(var r=[],o=0;o<n;o++){var u=e[Math.floor(Math.random()*e.length)];r.push(u.slice(0))}var s,l,c=f(e,r),d=0;do{a(e,c,r),s=c,c=f(e,r),l=i(c,s),t&&t(l,d),d++}while(l>0);return{means:r,assignments:c,steps:d}},distance:c,findClosestMean:s,generateRandomPoints:function(e,n){o.default.init(e,4,1);for(var t=[],r=0;r<n;r++){var a=o.default.generatePoint();t.push(a)}return t},findIndexOfMinimum:l,assignPointsToMeans:f,moveMeansToCenters:a,countChangedAssignments:i,findAverageMeanSeparation:function(e){for(var n=0,t=0,r=e.length,o=0;o<r-1;o++)for(var a=o+1;a<r;a++)n+=c(e[o],e[a]),t++;return n/t},findRanges:function(e){for(var n=e[0],t=e.length,r=n.length,o=[],a=0;a<r;a++)o[a]=[n[a],n[a]];for(var u=1;u<t;u++){var i=e[u];for(a=0;a<r;a++)i[a]<o[a][0]&&(o[a][0]=i[a]),i[a]>o[a][1]&&(o[a][1]=i[a])}return o},countPointsPerMean:function(e){for(var n={},t=0,r=e.length;t<r;t++){var o=e[t];n[o]?n[o]++:n[o]=1}return n}}},function(e,n,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"dataset",{enumerable:!0,get:function(){return a.default}}),n.default=void 0,Object.defineProperty(n,"phamBestK",{enumerable:!0,get:function(){return u.default}});var o=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var t=f(n);if(t&&t.has(e))return t.get(e);var o={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(o,u,i):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}(t(0)),a=i(t(3)),u=i(t(4));function i(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(f=function(e){return e?t:n})(e)}n.default=o.default},function(e,n,t){"use strict";function r(e,n,t,r,o){var a,u;do{u=0;for(var i=0;i<o;i++)u+=e+Math.random()*Number.MAX_VALUE%(n-e);u<0&&(u-=o-1),a=u/o}while(!(t<=a&&a<r));return a}var o;function a(e,n){for(var t=[],r=0,o=e.length;r<o;r++){var a=e[r],u=a[1]-a[0],i=a[0]+Math.random()*u,f=u/2+Math.random()*u/2*n,s={bmin:i-f/2,bmax:i+f/2,rmin:i-f/2,rmax:i+f/2,height:3};t.push(s)}return t}n.init=function(e,n,t){var r=t||1;o=[];for(var u=0;u<n;u++){var i=a(e,r);o.push(i)}return o},n.generateClusterCurveDescriptions=a,n.genrand=r,n.generatePoint=function(e){if(!o)return null;e||(e=Math.floor(Math.random()*o.length));for(var n=o[e],t=[],a=0,u=n.length;a<u;a++){var i=n[a];t.push(r(i.bmin,i.bmax,i.rmin,i.rmax,i.height))}return t}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={normalize:function(e,n){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],o=0,a=e.length;o<a;o++){var u=e[o],i=[];for(var f in u){var s=u[f],l=n[f],c=t[f]||1;switch(l.type){case"discrete":for(var d=0,v=l.values.length;d<v;d++)l.values[d]==s?i.push(c):i.push(0);break;case"linear":i.push((s-l.min)/l.range*c)}}r.push(i)}return r},findRanges:function(e,n){for(var t={},r=0,o=n.length;r<o;r++){var a=n[r];for(var u in a){if(!t.hasOwnProperty(u)){var i={type:e[u]||"linear"};switch(i.type){case"discrete":i.values=[];break;case"linear":i.min=Number.MAX_VALUE,i.max=Number.MIN_VALUE}t[u]=i}var f=t[u],s=a[u];switch(f.type){case"discrete":-1==f.values.indexOf(s)&&f.values.push(s);break;case"linear":s>f.max&&(f.max=s),s<f.min&&(f.min=s)}}}for(var l in t)switch(t[l].type){case"linear":t[l].range=t[l].max-t[l].min}return t},denormalizeDatum:function(e,n){var t={},r=0;for(var o in n){var a=e[r],u=n[o],i=void 0;switch(u.type){case"discrete":for(var f=u.values.length,s=e.slice(r,r+f),l=-1,c=Number.MIN_VALUE,d=0;d<f;d++)s[d]>c&&(c=s[d],l=d);i=u.values[l],r+=f;break;case"linear":i=u.min+a*u.range,r+=1}t[o]=i}return t}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=t(0))&&r.__esModule?r:{default:r};var a=function(e,n){if(e.length!=n.length)throw"point1 and point2 must be of same dimension";for(var t=e.length,r=0,o=0;o<t;o++)r+=(e[o]-n[o])*(e[o]-n[o]);return r},u=function(e,n,t){for(var r={},o=0,u=e.length;o<u;o++){var i=t[o];r.hasOwnProperty(i)||(r[i]=0),r[i]+=a(e[o],n[i])}return r},i=function(e,n,t){var r=u(e,n,t),o=0;for(var a in r)o+=r[a];return o},f=function(e,n){var t=e[0].length,r=e.length;if(!(r<2||t<=1))return 2==r?1-3/(4*t):n+(1-n)/6},s=function(e,n,t,r,o){var a,u=n.length,s=i(e,n,t),l=f(n,r);return a=1==u||0==o?1:s/(l*o),{K:u,distortion:s,alpha:l,f:a}};n.default={findBestK:function(e,n,t){var r,a={},u={},i=1;for(a[i]=o.default.cluster(e,i),u[i]=s(e,a[i].means,a[i].assignments),console.log(i+" => "+u[i].f),i++;i<n;){a[i]=o.default.cluster(e,i);var f=s(e,a[i].means,a[i].assignments,u[i-1].alpha,u[i-1].distortion);t&&t({K:f.K,f:f.f}),u[i]=f,console.log(i+" => "+u[i].f),i++}var l,c=Number.MAX_VALUE,d={};for(var v in u){var h=u[v];d[v]=h.f,h.f<c&&(c=h.f,r=h.K,l=a[v].means)}return{f:d,K:r,means:l}},f:s,clusterDistortions:u,alpha:f,totalDistortion:i}}])}));